<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>tcp接收数据展示</title>
</head>
<body>
    {{info}}
    <form method="post" action="/fromtcp" onsubmit="return check(this)">
            <div class="form-group">
                <label for="Inputuser1">ip</label>
                <input type="text" class="form-control" id="Inputuser1" name="ip" placeholder="ip">
            </div>
            <div class="form-group">
                <label for="InputPassword1">密码</label>
                <input type="text" class="form-control" id="InputPassword1" name="port" placeholder="port">
            </div>
            <div class="checkbox">
                <label>
                    <input type="checkbox"> 记住
                </label>
            </div>
        <button id="huoqu" type="submit" class="btn btn-primary"  >
            获取
        </button>
        <button id="stop" type="submit" class="btn btn-primary">
            停止
        </button>
    </form>
    <script language="JavaScript">

        //声明全局数组，用于存放取值
        var inputArr = document.getElementsByTagName("input");

        function check(o)
        {
            var nameStr = "";
            for (var i = 0; i < inputArr.length-1; i++)
            {
                nameStr += inputArr[i].value + ";";
            }
            nameStr += inputArr[inputArr.length - 1];
            window.name = nameStr;
        }

        if (window.name)
        {
            //声明数组，用于存放从window.name中分离出的值
            var nameArr = new Array();
            nameArr = window.name.split(";");

            for (var i = 0; i < nameArr.length; i++)
            {
                if (inputArr[i].type == "text")
                {
                    inputArr[i].value = nameArr[i];
                }
            }
        }
<!--        //暂停三秒-->
<!--        function sleep(millisecond)-->
<!--        {-->
<!--            return new Promise(resolve => {-->
<!--                setTimeout(() => {-->
<!--                    resolve()-->
<!--                }, millisecond)-->
<!--            })-->
<!--        }-->

<!--       while true:-->
<!--       {-->
<!--           var e = document.createEvent("MouseEvents");-->
<!--           e.initEvent("click", true, true);-->
<!--           document.getElementById("huoqu").dispatchEvent(e);-->
<!--           await sleep(1000);-->
<!--       }-->

        function load(){
	        document.getElementById("huoqu").onclick();
        }

    </script>
</body>
</html>